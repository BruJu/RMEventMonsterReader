package fr.bruju.rmeventreader.implementation.formulatracker.exploitation;

import fr.bruju.rmeventreader.implementation.formulatracker.contexte.Attaques;

public class MAfficheur implements Maillon {

	
	
	private int tMin;
	private int tMax;

	public MAfficheur(int tMin, int tMax) {
		this.tMin = tMin;
		this.tMax = tMax;
	}

	@Override
	public void traiter(Attaques attaques) {
		attaques.getAttaques().stream().forEach(attaque -> {
			System.out.println("===" + attaque.getNom() + "===");
			attaque.getResultat().map.forEach((k, v) -> v.stream()
					.map(formule -> k.getPossesseur().getNom() + "." + k.getNom() + " " + formule.getString())
					.map(chaine -> chaine.length() > tMin ? chaine : null).filter(c -> c != null)
					.map(chaine -> chaine.length() < tMax ? chaine : "TL;DR")
					.forEach(chaine -> System.out.println(chaine)));

		});
	}

}
